@model UserManagement.Models.User

<div class="container mt-4">
    <h2>User Details</h2>
    <dl class="row">
        <dt class="col-sm-3">Forename</dt>
        <dd class="col-sm-9">@Model.Forename</dd>
        <dt class="col-sm-3">Surname</dt>
        <dd class="col-sm-9">@Model.Surname</dd>
        <dt class="col-sm-3">Email</dt>
        <dd class="col-sm-9">@Model.Email</dd>
        <dt class="col-sm-3">Date of Birth</dt>
        <dd class="col-sm-9">@(Model.DateOfBirth == DateTime.MinValue ? "-" : Model.DateOfBirth.ToString("dd/MM/yyyy"))</dd>
        <dt class="col-sm-3">Active</dt>
        <dd class="col-sm-9">@(Model.IsActive ? "Yes" : "No")</dd>
    </dl>
    <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary">Edit</a>
    <a asp-action="List" class="btn btn-secondary">Back</a>
    @if (ViewBag.UserLogs is List<UserManagement.Models.LogEntry> logs && logs.Any())
    {
        <h4 class="mt-4">Recent Activity</h4>
        <div class="table-responsive">
            <table class="table table-striped table-sm">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Action</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var log in logs)
                    {
                        <tr>
                            <td>@log.Created.ToLocalTime().ToString("dd/MM/yyyy HH:mm")</td>
                            <td>@log.Action</td>
                            <td>@log.Details</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <p class="text-muted mt-3">No activity recorded for this user yet.</p>
    }
    @if (ViewBag.TotalPages > 1)
    {
        <nav class="d-flex justify-content-between align-items-center">
            <a class="btn btn-outline-primary @(ViewBag.Page <= 1 ? "disabled" : "")"
               asp-action="View"
               asp-route-id="@Model.Id"
               asp-route-page="@(ViewBag.Page - 1)"
               asp-route-pageSize="@ViewBag.PageSize">
                ← Previous
            </a>

            <span>Page @ViewBag.Page of @ViewBag.TotalPages</span>

            <a class="btn btn-outline-primary @(ViewBag.Page >= ViewBag.TotalPages ? "disabled" : "")"
               asp-action="View"
               asp-route-id="@Model.Id"
               asp-route-page="@(ViewBag.Page + 1)"
               asp-route-pageSize="@ViewBag.PageSize">
                Next →
            </a>
        </nav>
    }

</div>
